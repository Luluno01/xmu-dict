function calcGPA(gradeStr) {
  let gpa;
  let grade;
  if (!(grade = parseInt(gradeStr))) { // A, B, ...
    let gpa_table = {
      'A': 4.0,
      'A-': 3.7,
      'B+': 3.3,
      'B': 3.0,
      'B-': 2.7,
      'C+': 2.3,
      'C': 2.0,
      'C-': 1.7,
      'D': 1.0,
      'F': 0
    };
    gpa = gradeStr in gpa_table ? gpa_table[gradeStr] : 0;
  } else {
    if (grade < 74.5) { // 0~74
      if (grade < 67.5) { // 0~67
        if (grade < 63.5) { // 0~63
          if (grade < 60) { // 0~59
            gpa = 0
          } else { // 60~63
            gpa = 1.0;
          }
        } else { // 64~67
          gpa = 1.7;
        }
      } else if (grade < 71.5) { // 68~71
        gpa = 2.0;
      } else { // 72~74
        gpa = 2.3;
      }
    } else if (grade < 84.5) { // 75~84
      if (grade < 80.5) { // 75~80
        if (grade < 77.5) { // 75~77
          gpa = 2.7;
        } else { // 78~80
          gpa = 3.0;
        }
      } else { // 81~84
        gpa = 3.3;
      }
    } else if (grade < 89.5) { // 85~89
      gpa = 3.7;
    } else { // 90~
      gpa = 4.0;
    }
  }
  return gpa;
}

module.exports = calcGPA;